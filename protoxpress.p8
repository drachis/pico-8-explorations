pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
    spr()
    time = 0 
end

slug = {
    spr = 010,
    x = 8*2,
    y = 8*9,
    crop_x =1,
    crop_y =1,
    flipX = false,
    flipY = false,
    dx = 0.0,
    dy = 0.0,
    friction = 0.02,
    bounce = 1,
    w=0.4,
    h=0.4
}


function _draw()
    cls(1)
    --map tiles
    map(0,0, 0,8*9, 16,3)
    map(0,3, 0,8*12, 16,1)
    map(0,3, 0,8*13, 16,1)
    map(0,3, 0,8*14, 16,1)
    map(0,3, 0,8*15, 16,1)
    -- treasure chest
    spr(05, 8*13+2,8*9+3, 2,2, true,false)
    -- bottom dither
    for x=0, 128, 1 do
        for y=8*12 , 128, 1 do
            if x%2==0 then
                if y%2==0 then
                    pset(x,y,12)
                end
            else    
                if (y+1)%2==0 then
                    pset(x,y,12)
                end
            end
        end
    end
    -- sine wave rainbow
    for x=0,128,1 do
        for y=0, 34, 1 do
            pset(
                x,
                48 + 
                sin(time/32+x/96)*2 +
                sin(time/48+x/48)*4 -
                sin(time/24+x/48)*3 -
                y
                , 08+y/5)
            end
        end
        -- top dither
        for x=128, 0, -1 do
            for y=8*8 , 0, -1 do
                if x%2==0 then
                    if y%2==0 then
                        pset(x,y,1)
                    end
                else    
                if (y+1)%2==0 then
                    pset(x,y,1)
                end
            end
        end
    end
    --slugy
    spr(slug.spr, slug.x, slug.y, slug.crop_x,slug.crop_y, slug.flipX,slug.flipY)
    
end

function _update()
    time += 0.25
    slug_control(slug)
end

function slug_control(_slug)
    accel = 3
	if (btn(0)) _slug.x -= accel 
	if (btn(1)) _slug.x += accel 
	if (btn(2)) _slug.y -= accel 
	if (btn(3)) _slug.y += accel

end

__gfx__
00000000000000033333333330000000000000000000000900000000000000000000000000000000000000000000000000077077000000000000000000000000
00000000000000333333333333000000000000000000099990000000000000000000000000000000000000000000000000075075000000000000000000000000
000000000000033444344434433000000000000000999fff9000000000000000000000000000000000000000000000000000b0b0000000000000000000000000
0000000000003334444454344333000000000000009ffffff90000000000000000000000000000000057057000057057000bbbb0000000000000000000000000
00000000000334345444444443433000000000000009ffff99900000000000000000000000000000007707700007707700bbbbb0000000000000000000000000
00000000003344444444444544443300000000000009ff9955599000000000000000000000000000000b0b000000b0b000bb0000000000000000000000000000
000000000334545444454444544543300000000000009955555559900000000000000000000000000bbbbbb000bbbbb00bb00000000000000000000000000000
00000000334444444444444444444433000000000000955555555590000000000000000000000000bbbbbbb0bbbbbbb00b000000000000000000000000000000
00000000000000004444444400000000000000000000999555555990000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000004544444400000000000000000000944995599490000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000004444454400000000000000000000944449944490000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000004444444400000000000000000000944449444490000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000004444444400000000000000000000944449444900000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000004454444400000000000000000000099449499000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000004444445400000000000000000000000999900000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000004444444400000000000000000000000009000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020203000102000002020300000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1212121212021212000012121202021200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1212121212121212000012121212121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
