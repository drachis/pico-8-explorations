pico-8 cartridge // http://www.pico-8.com
version 42
__lua__

#include slug.lua

function _init()
    spr()
    time = 0 
end

function _draw()
    cls(1)
    --map tiles
    map(0,0, 0,8*9, 16,3)
    map(0,3, 0,8*12, 16,1)
    map(0,3, 0,8*13, 16,1)
    map(0,3, 0,8*14, 16,1)
    map(0,3, 0,8*15, 16,1)
    -- treasure chest
    spr(05, 8*13+2,8*9+3, 2,2, true,false)
    -- bottom dither
    for x=0, 128, 1 do
        for y=8*12 , 128, 1 do
            if x%2==0 then
                if y%2==0 then
                    pset(x,y,12)
                end
            else    
                if (y+1)%2==0 then
                    pset(x,y,12)
                end
            end
        end
    end
    -- sine wave rainbow
    for x=0,128,1 do
        for y=0, 34, 1 do
            pset(
                x,
                48 + 
                sin(time/32+x/96)*2 +
                sin(time/48+x/48)*4 -
                sin(time/24+x/48)*3 -
                y
                , 08+y/5)
            end
        end
        -- top dither
        for x=128, 0, -1 do
            for y=8*8 , 0, -1 do
                if x%2==0 then
                    if y%2==0 then
                        pset(x,y,1)
                    end
                else    
                if (y+1)%2==0 then
                    pset(x,y,1)
                end
            end
        end
    end
    --slugy
    spr(slug.spr, slug.x, slug.y, slug.crop_x,slug.crop_y, slug.flipX,slug.flipY)
    
    draw_slime_trail()
end

function _update()
    time += 0.25
    slug_control(slug)
end

__gfx__
00000000000000033333333330000000000000000000000bbbbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000
0000000000000033333333333300000000000000000000b333b333b33b0000000000000000000000000000000000000000000000000000000000000000000000
000000000000033444344434433000000000000000000bb444b444b44bb000000000000000000000000000000000000000000000000000000000000000000000
00000000000033344444543443330000000000000000b3b4444454b44b3b00000000000000000000000000000000000000000000000000000000000000000000
0000000000033434544444444343300000000000000b34b4544444444b43b0000000000000000000000000000000000000000000000000000000000000000000
000000000033444444444445444433000000000000bb4444444444454444bb000000000000000000000000000000000000000000000000000000000000000000
00000000033454544445444454454330000000000b3b5454444544445445b3b00000000000000000000000000000000000000000000000000000000000000000
0000000033444444444444444444443300000000b3444444444444444444443b0000000000000000000000000000000000000000000000000000000000000000
0000000054444444444444444444444500000000b4444444444444444444444b0000000000000000000000000000000000000000000000000000000000000000
0000000055444444454444444544445500000000bb44444444444544454444bb0000000000000000000000000000000000000000000000000000000000000000
0000000054444544444445444444455500000000b44445444544444444444bbb0000000000000000000000000000000000000000000000000000000000000000
0000000054444444444444444444445500000000b4444444444444444444445b0000000000000000000000000000000000000000000000000000000000000000
0000000055444444444444444444444500000000bb444444444444444444444b0000000000000000000000000000000000000000000000000000000000000000
0000000055544444445444444454444500000000bbb4444444444454445444bb0000000000000000000000000000000000000000000000000000000000000000
0000000055444454444444544444445500000000b5444454445444444444445b0000000000000000000000000000000000000000000000000000000000000000
0000000054444444444444444444444500000000b4444444444444444444444b0000000000000000000000000000000000000000000000000000000000000000
0000000055444444444444444444445500000000b5444444444444444444445b0000000000000000000000000000000000000000000000000000000900000000
00000000055444444544444445444550000000000b54444445444444454445b00000000000000000000000000000000000000000000000000000099990000000
000000000055454444444544444455000000000000b54b444444454444445b0000000000000000000000000000000000000000000000000000999fff90000000
0000000000055544444444444445500000000000000bbb44444444444b45b000000000000000000000000000000000000000000000000000009ffffff9000000
00000000000055444444444444550000000000000000b544444444444bbb00000000000000000000000000000000000000000000000000000009ffff99900000
000000000000055444544444455000000000000000000b5444b4444445b000000000000000000000000000000000000000000000000000000009ff9955599000
0000000000000055455544545500000000000000000000b545bb44b45b0000000000000000000000000000000000000000000000000000000000995555555990
00000000000000055555555550000000000000000000000bbbbbbbbbb00000000000000000000000000000000000000000000000000000000000955555555590
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000999555555990
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000944995599490
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000944449944490
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000944449444490
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000944449444900
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000099449499000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000999900000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009000000
00000000000000000007707700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000007507500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000b0b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0057057000057057000bbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007707700007707700bbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000b0b000000b0b000bb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0bbbbbb000bbbbb00bb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbb0bbbbbbb00b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020203000102000002020300000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1212121212021212000012121202021200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1212121212121212000012121212121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
